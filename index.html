<!DOCTYPE html>
<!-- template for lunamark web pages -->
<html>
<head>
<meta charset="utf-8">
<title></title>
<link rel="stylesheet" type="text/css" href="site.css" />
</head>
<body>
<h1 class="title"></h1>
<h1>Lunamark</h1>

<p>Lunamark is a lua library and command-line program for conversion of markdown to other textual formats. Currently HTML, <a href="http://paulrouget.com/dzslides/">dzslides</a> (HTML5 slides), Docbook, ConTeXt, LaTeX, and Groff man are the supported output formats, but it is easy to add new writers or modify existing ones. The markdown parser is written using a PEG grammar and can also be modified by the user.</p>

<p>Lunamark’s markdown parser currently supports the following extensions (which can be turned on or off individually):</p>

<ul>
<li>Smart typography (fancy quotes, dashes, ellipses)</li>
<li>Significant start numbers in ordered lists</li>
<li>Footnotes</li>
<li>Definition lists</li>
<li>Pandoc-style title blocks</li>
<li>Flexible metadata using lua declarations</li>
</ul>

<p>More extensions will be supported in later versions.</p>

<p>The library is as portable as lua and has very good performance. It is slightly faster than the author’s own C library <a href="http://github.com/jgm/peg-markdown">peg-markdown</a>, an order of magnitude faster than pandoc, two orders of magnitude faster than <code>Markdown.pl</code>, and three orders of magnitude faster than <code>markdown.lua</code>.</p>

<p>Benchmarks (converting a 1M test file consisting of 25 copies of the markdown test suite concatenated together):</p>

<ul>
<li><code>discount</code> 0.14s</li>
<li><code>lunamark</code> 0.42s</li>
<li><code>peg-markdown</code> 0.50s</li>
<li><code>pandoc</code> 4.97s</li>
<li><code>Markdown.pl</code> (1.0.2b8) 56.75s</li>
<li><code>markdown.lua</code> 996.14s</li>
</ul>

<p>It is very easy to extend the library by modifying the writers, adding new writers, and even modifying the markdown parser. Some simple examples are given in the <a href="http://jgm.github.com/lunamark/doc/">API documentation</a>.</p>

<h2>Installing</h2>

<p>You can install the latest development version of lunamark using <a href="http://www.luarocks.org">luarocks</a>:</p>

<pre><code>git pull http://github.com/jgm/lunamark.git
cd lunamark
luarocks make
</code></pre>

<p>Released versions will be uploaded to the luarocks repository, so you should be able to install them using:</p>

<pre><code>luarocks install lunamark
</code></pre>

<p>There may be a short delay between the release and the luarocks upload.</p>

<h2>Using the library</h2>

<p>Simple usage example:</p>

<pre><code>local lunamark = require(&quot;lunamark&quot;)
local opts = { }
local writer = lunamark.writer.html.new(opts)
local parse = lunamark.reader.markdown.new(writer, opts)
print(parse(&quot;Here&#39;s my *text*&quot;))
</code></pre>

<p>For more examples, see <a href="http://jgm.github.com/lunamark/doc/">API documentation</a>.</p>

<h2>The <code>lunamark</code> executable</h2>

<p>The <code>lunamark</code> executable allows easy markdown conversion from the command line. For usage instructions, see the <a href="http://jgm.github.com/lunamark/lunamark.1.html">lunamark(1)</a> man page.</p>

<h2>The <code>lunadoc</code> executable</h2>

<p>Lunamark comes with a simple lua library documentation tool, <code>lunadoc</code>. For usage instructions, see the <a href="http://jgm.github.com/lunamark/lunadoc.1.html">lunadoc(1)</a> man page. <code>lunadoc</code> reads source files and parses specially marked markdown comment blocks. <a href="http://jgm.github.com/lunamark/doc/">Here</a> is an example of the result.</p>

<h1>Tests</h1>

<p>The source directory contains a large test suite in <code>tests</code>. This includes existing Markdown and PHP Markdown tests, plus more tests for lunamark-specific features and additional corner cases.</p>

<p>To run the tests, use <code>bin/shtest</code>.</p>

<pre><code>`bin/shtest --help`             # get usage
`bin/shtest`                    # run all tests
`bin/shtest indent`             # run all tests matching &quot;indent&quot;
`bin/shtest -p Markdown.pl` -n  # run all tests using Markdown.pl,
                                # and normalizing whitespace
</code></pre>

<p>Lunamark currently fails a few of the PHP Markdown tests. In most cases I disagree with the interpretation of markdown syntax that these tests reflect.</p>

<h1>Authors</h1>

<p>lunamark is released under the MIT license.</p>

<p>Most of the library is written by John MacFarlane. Hans Hagen made some major performance improvements. Khaled Hosny added the original ConTeXt writer.</p>

<p>The dzslides HTML, CSS, and javascript code is by Paul Rouget, released under the DWTFYWT Public License.</p>
<footer>

</footer>
</body>
</html>
